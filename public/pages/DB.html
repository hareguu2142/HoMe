<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°ì´í„°ë² ì´ìŠ¤ ì •ë¦¬</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <style>
        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            line-height: 1.8;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            width: 100%;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #ffffff;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
        }
        header {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            padding: 20px;
            text-align: center;
            color: #ffffff;
            border-radius: 10px 10px 0 0;
            position: relative;
        }
        h1, h2 {
            color: #4a4a4a;
        }
        h1 {
            margin-top: 0;
            font-size: 2.5rem;
        }
        h2 {
            margin-top: 30px;
            font-size: 1.8rem;
            border-bottom: 2px solid #6e8efb;
            padding-bottom: 10px;
        }
        .content-container {
            margin-top: 30px;
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        pre {
            background-color: #282c34;
            padding: 1rem;
            border-radius: 5px;
            overflow-x: auto;
            max-width: 100%;
        }
        code {
            font-family: 'Consolas', 'Monaco', 'Andale Mono', 'Ubuntu Mono', monospace;
        }
        .home-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background-color: #ffffff;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            text-decoration: none;
            color: #6e8efb;
            font-weight: bold;
            font-size: 24px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        .home-button:hover {
            background-color: #6e8efb;
            color: #ffffff;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="/" class="home-button" title="ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°">ğŸ </a>
            <h1>ë°ì´í„°ë² ì´ìŠ¤ ì •ë¦¬</h1>
        </header>
        <div class="content-container">
            <p>ì´ í˜ì´ì§€ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ê´€í•œ ì •ë³´ë¥¼ ì •ë¦¬í•˜ëŠ” ê³³ì…ë‹ˆë‹¤.</p>
            
            <p>MongoDBë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ë ¤ê³  í•©ë‹ˆë‹¤.</p>

            <h2>MongoDB ì—°ê²° ì„¤ì •</h2>
            <pre><code class="language-javascript">
// Express í”„ë ˆì„ì›Œí¬ ê°€ì ¸ì˜¤ê¸°
const express = require("express");

// íŒŒì¼ ê²½ë¡œ ì‘ì—…ì„ ìœ„í•œ Node.jsì˜ path ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸°
const path = require("path");

// Express ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
const app = express();

// MongoDB ë“œë¼ì´ë²„ì—ì„œ MongoClient ê°€ì ¸ì˜¤ê¸°
const { MongoClient } = require("mongodb");

// ì„œë²„ê°€ ë¦¬ìŠ¤ë‹í•  í¬íŠ¸ ë²ˆí˜¸ ì„¤ì •
const port = 3000;

// MongoDB ì—°ê²° URI ì„¤ì •
// USERNAME, PASSWORD, CLUSTER_URL, DATABASE_NAMEì€ ì‹¤ì œ ê°’ìœ¼ë¡œ ëŒ€ì²´í•´ì•¼ í•©ë‹ˆë‹¤.
// <>ì€ ì“¸í•„ìš”ì—†ìŠµë‹ˆë‹¤.
const uri = "mongodb+srv://&lt;USERNAME&gt;:&lt;PASSWORD&gt;@&lt;CLUSTER_URL&gt;/&lt;DATABASE_NAME&gt;?retryWrites=true&w=majority";

// MongoClient ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
const client = new MongoClient(uri);
            </code></pre>

            <h2>ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì˜ˆì œ</h2>
            <pre><code class="language-javascript">
app.get("/find", async (req, res) => {
    // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì—ì„œ camoì™€ field ê°’ ì¶”ì¶œ
    const { camo, field } = req.query;
  
    // camo íŒŒë¼ë¯¸í„°ê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ ì‘ë‹µ
    if (!camo) {
        return res.status(400).json({ error: "camo parameter is required" });
    }
  
    try {
        // MongoDBì— ì—°ê²°
        await client.connect();
        // ë°ì´í„°ë² ì´ìŠ¤ì™€ ì»¬ë ‰ì…˜ ì„ íƒ
        const database = client.db("code_to_map");
        const collection = database.collection("code_to_map");
        // ì¿¼ë¦¬ ê°ì²´ ìƒì„±
        const query = { camo: camo };
        // ì¿¼ë¦¬ ì‹¤í–‰í•˜ì—¬ ë¬¸ì„œ ì°¾ê¸°
        const document = await collection.findOne(query);
  
        if (document) {
            const id = document._id;
            let selectedField = field;
  
            // ì„ íƒëœ í•„ë“œê°€ ë¬¸ì„œì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
            if (selectedField in document) {
                const fieldValue = document[selectedField];
                return res.json(fieldValue);
            } else {
                // í•„ë“œê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ì—ëŸ¬ ì‘ë‹µ
                return res.status(404).json({
                    error: `Field '${selectedField}' not found in the document`,
                });
            }
        } else {
            // ë¬¸ì„œë¥¼ ì°¾ì§€ ëª»í–ˆì„ ë•Œ ì—ëŸ¬ ì‘ë‹µ
            return res
                .status(404)
                .json({ error: "No document found with the given camo value" });
        }
    } catch (error) {
        // ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ ì—ëŸ¬ ë¡œê¹… ë° ì‘ë‹µ
        console.error("Error occurred while querying the database:", error);
        return res.status(500).json({ error: "Internal server error" });
    }
});
            </code></pre>
            
            <p>ì´ ì½”ë“œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ íŠ¹ì • ê°’ì„ ì°¾ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
</body>
</html>